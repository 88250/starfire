## æ˜Ÿç«

### ç®€ä»‹

> æ˜Ÿæ˜Ÿä¹‹ç«å¯ä»¥ç‡ŽåŽŸ

æ˜Ÿç«æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„å†…å®¹åˆ†äº«è®¨è®ºç¤¾åŒºï¼Œé€šè¿‡ç‚¹å¯¹ç‚¹è¶…åª’ä½“åè®®è®©ç¤¾åŒºæ›´å¿«ã€æ›´å®‰å…¨ä¹Ÿæ›´å¼€æ”¾ã€‚

### åŠ¨æœº

1. åœ¨ä¸­å¿ƒåŒ–çš„æœåŠ¡ä¸‹ï¼Œä½ çš„æ•°æ®å¹¶ä¸å±žäºŽä½ ï¼ŒæœåŠ¡ç»ˆæ­¢æˆ–è€…è´¦å·è¢«å°æ„å‘³ç€ä½ å°†å¤±åŽ»ä½ çš„æ•°æ®
2. ä¸­å¿ƒåŒ–æœåŠ¡ä¼šé€šè¿‡ä½ çš„æ•°æ®è¿›è¡Œç›ˆåˆ©ï¼Œä½†å¹¶æœªä»Žç›ˆåˆ©ä¸­æ‹¿å‡ºé€æ˜Žå…¬å¹³çš„æ”¶ç›Šå›žæŠ¥ç»™ä½ 

æ˜Ÿç«çš„è¯žç”Ÿä¸»è¦è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå³ä½ çš„æ•°æ®æ°¸è¿œå±žäºŽä½ ã€‚ç¬¬äºŒä¸ªé—®é¢˜æ˜Ÿç«ä¼šé€æ­¥å°è¯•æŽ¢ç´¢ã€‚ä¸€äº›ç»†èŠ‚å’Œæ„Ÿæƒ³è¯·æµè§ˆ[å†™åœ¨æ˜Ÿç«åˆç‰ˆå‘å¸ƒä¹‹é™…](https://hacpai.com/article/1559578726531)ã€‚

### åŠŸèƒ½

* å‘å¸ƒæ–‡ç« ã€å‘å¸ƒè¯„è®º
* å›ºå®šçš„ä¸ªäººä¸»é¡µåœ°å€
* æ— ç¼åµŒå…¥ IPFS æ•°æ®

æ˜Ÿç«å¯ä»¥ç”¨äºŽè®°å½•ä½ ç”Ÿæ´»çš„ç‚¹ç‚¹æ»´æ»´ã€å’Œå…¶ä»–å¿—åŒé“åˆçš„äººå¼€å±•è®¨è®ºæˆ–è€…æŽ¨å¹¿ä½ çš„äº§å“ç­‰ï¼Œå¯ä»¥æŠŠæ˜Ÿç«å½“åšä¸ªäººåšå®¢ã€ç¤¾åŒºè®ºå›ã€è‡ªåª’ä½“å¹³å°æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”æ‰€æœ‰æ•°æ®éƒ½æ˜¯æ°¸ä¹…æ€§çš„ã€‚

### æŠ€æœ¯

[IPFS](https://ipfs.io) ä¸ºæ˜Ÿç«çš„å®žçŽ°æä¾›äº†åŸºç¡€ï¼š

* é€šè¿‡ File å®žçŽ°å¸–å­ã€è¯„è®ºå†…å®¹çš„å­˜å–
* é€šè¿‡ DAG å®žçŽ°å…ƒæ•°æ®çš„å­˜å–
* é€šè¿‡ PubSub å®žçŽ°èŠ‚ç‚¹é—´çš„å‡†å®žæ—¶äº¤äº’
* é€šè¿‡ IPNS å®žçŽ°ç”¨æˆ·ä¸ªäººä¸»é¡µå¯»å€å’Œæ›´æ–°

### ç®¡ç†

åœ¨ç›®å‰çš„æŠ€æœ¯æ¡ä»¶ä¸‹ï¼Œä»ç„¶å­˜åœ¨ä¸€ä¸ªæ— æ³•å®žçŽ°çš„ä¸­å¿ƒåŒ–â€œèŠ‚ç‚¹â€ï¼Œå³æ˜Ÿç«ç®¡ç†å‘˜ï¼Œå› ä¸ºæœ‰ä¸€äº›äº‹æƒ…éœ€è¦ç‰¹å®šçš„äººæ¥åšï¼š

1. ç¡®è®¤ä»£ç å’Œç‰ˆæœ¬å¹¶è¿›è¡Œå‘å¸ƒ
2. ç¡®è®¤æ¶æ„èŠ‚ç‚¹å¹¶æ›´æ–°é»‘åå•

è¿™ä¸¤é¡¹æ“ä½œæˆ‘ä»¬ä¼šé€šè¿‡ç®¡ç†å‘˜ï¼ˆ`QmfQUfpYh2J2jaihvfwsR6ACQnf3iQ551N1dNMfcNTmyjr`ï¼‰è¿›è¡Œã€‚æ‰€æœ‰ç®¡ç†è¿ç»´æ“ä½œéƒ½æ˜¯å…¬å¼€é€æ˜Žçš„ï¼Œä¸å­˜åœ¨ä»»ä½•â€œæš—ç®±æ“ä½œâ€ï¼Œç”¨æˆ·å¯ä»¥å¯¹æˆ‘ä»¬çš„ç®¡ç†è¿ç»´æ“ä½œè¿›è¡Œç›‘ç£ã€‚

### FAQ

#### IPFS æ˜¯ä»€ä¹ˆï¼Ÿ

è¯·çœ‹ [IPFS å…¥é—¨ç¬”è®°](https://hacpai.com/article/1511015097370)ã€‚æ˜Ÿç«åŸºäºŽ IPFS æŠ€æœ¯æ ˆå®žçŽ°ï¼Œç”¨æˆ·å¯ç›´æŽ¥ä½¿ç”¨ IPFS å·²æœ‰åŠŸèƒ½å’Œæ•°æ®ã€‚

#### æˆ‘çš„æ•°æ®å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ

ä½ çš„æ•°æ®åœ¨æœ¬åœ°ç£ç›˜ä¸Šä¼šå­˜æœ‰ä¸€ä»½ï¼Œå¦‚æžœæœ‰å…¶ä»–äººçœ‹è¿‡ï¼Œåˆ™åœ¨ä»–çš„èŠ‚ç‚¹ä¸Šä¼šç¼“å­˜ä¸€ä»½ï¼›å¦‚æžœæœ‰å…¶ä»–äººæ”¶è—ï¼ˆ`ipfs pin`ï¼‰è¿‡ï¼Œåˆ™åœ¨ä»–çš„èŠ‚ç‚¹ä¸Šä¹Ÿä¼šä¿å­˜ä¸€ä»½ã€‚

æœ¬åœ°ç£ç›˜æ•°æ®è·¯å¾„ç›®å½•è·¯å¾„é»˜è®¤åœ¨ `~/.ipfs/`ï¼ˆå¯é€šè¿‡çŽ¯å¢ƒå˜é‡ `IPFS_PATH` æŒ‡å®šè¯¥ç›®å½•è·¯å¾„ï¼‰ã€‚

#### å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

éœ€è¦å®Œæ•´å¤‡ä»½ .ipfs ç›®å½•ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰æ•°æ®ã€è´¦å·å’Œç›¸å…³é…ç½®ã€‚

#### å¿˜è®°å¯†é’¥æ€Žä¹ˆåŠžï¼Ÿ

.ipfs/config æ–‡ä»¶ä¸­çš„ `PrivKey` é¡¹ä¿å­˜äº†ä½ çš„å¯†é’¥å¯¹ï¼Œç™»å½•å’Œå‘å¸ƒå†…å®¹æ—¶éœ€è¦å¡«å†™è¯¥é¡¹ã€‚ä¸€å®šè¦å¦¥å–„ä¿ç®¡å¯†é’¥å¯¹ï¼Œä¸è¦æ³„éœ²ç»™ä»»ä½•ç¬¬ä¸‰æ–¹ã€‚å¦‚æžœä¸æ…Žé—å¤±è¯¥å¯†é’¥å¯¹ï¼Œåˆ™ä½ çš„è´¦å·å°†æ°¸è¿œä¸¢å¤±ï¼Œæ— æ³•æ¢å¤ã€‚

#### ä¼šåœæœå—ï¼Ÿ

ä»ŽæŠ€æœ¯ä¸Šè®²ï¼Œåªè¦ IPFS ç½‘ç»œèƒ½å¤Ÿè¿è¡Œï¼Œæ˜Ÿç«å°±ä¸ä¼šä¹Ÿä¸å¯èƒ½åœæœã€‚è¿™æ„å‘³ç€ï¼š

* ä½ å‘å¸ƒçš„å†…å®¹å°†ä¼šå¾—åˆ°æ°¸ä¹…å­˜å‚¨
* æ˜Ÿç«çš„ä»£ç æ°¸è¿œä¸ä¼šæ¶ˆå¤±

#### åŒ¿åç¨‹åº¦å¦‚ä½•ï¼Ÿ

è™½ç„¶æ˜Ÿç«ä¸éœ€è¦å®žååˆ¶ä½¿ç”¨ï¼Œä½†ä½ èŠ‚ç‚¹æ‰€åœ¨ IP æ˜¯å¯ä»¥è¢«å…¶ä»–äººèŽ·å–åˆ°çš„ï¼Œè€Œ IP ä½¿ç”¨è®°å½•åœ¨è¿è¥å•†é‚£é‡Œæ˜¯æœ‰è®°å½•çš„ï¼Œæ‰€ä»¥ä»ŽæŠ€æœ¯ä¸Šè€Œè¨€ï¼Œå…¶ä»–äººæ˜¯æœ‰åŠžæ³•å¯ä»¥æŸ¥åˆ°ä½ å®žåèº«ä»½çš„ã€‚

#### å­˜åœ¨å°ç¦æœºåˆ¶å—ï¼Ÿ

æˆ‘ä»¬æ˜¯é€šè¿‡ä¸€ä¸ªå…¨å±€çš„é»‘åå•æ¥è¿›è¡ŒèŠ‚ç‚¹çš„å±è”½ã€‚å¦‚æžœå‘çŽ°å­˜åœ¨æ¶æ„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¼šå°†å…¶åˆ—å…¥é»‘åå•ä¸­å¹¶è¿›è¡Œå¹¿æ’­ï¼Œç½‘ç»œä¸­çš„èŠ‚ç‚¹æ”¶åˆ°é»‘åå•åŽä¼šå’Œå…¶ä¸­æ‰€åˆ—å‡ºçš„æ¶æ„èŠ‚ç‚¹è¿›è¡Œæ–­å¼€ã€‚è¿™æ ·æ¶æ„èŠ‚ç‚¹å°±ä¼šå˜æˆå­¤å²›èŠ‚ç‚¹ï¼Œé˜²æ­¢å…¶å¯¹ç½‘ç»œçš„è¿›ä¸€æ­¥å¹²æ‰°ç ´åã€‚

#### ä½¿ç”¨åˆ°åŒºå—é“¾å—ï¼Ÿ

æ²¡æœ‰ä½¿ç”¨ï¼Œæ˜Ÿç«æ˜¯å®Œå…¨åŸºäºŽ IPFS å®žçŽ°çš„ã€‚å¦å¤–ï¼Œæ˜Ÿç«ç›®å‰ä¹Ÿæ²¡æœ‰ä½¿ç”¨åˆ° IPFS æ¿€åŠ±å±‚ Filecoinã€‚

#### å¼€æºå—ï¼Ÿ

https://github.com/b3log/starfire

#### ç”±è°å¼€å‘ï¼Œå¦‚ä½•å®žçŽ°ç›ˆåˆ©ï¼Ÿ

æ˜Ÿç«ç”± B3log å¼€æºç¤¾åŒºè¿›è¡Œå¼€å‘å’Œç»´æŠ¤ã€‚ç›®å‰æˆ‘ä»¬æ²¡æœ‰ç›ˆåˆ©è®¡åˆ’ï¼Œå› ä¸ºé™¤äº†å¾ˆå°‘çš„å¼€å‘å·¥ä½œé‡å’Œå¼•å¯¼èŠ‚ç‚¹æž¶è®¾å¤–ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä»˜å‡ºå…¶ä»–æˆæœ¬ã€‚å°†æ¥å¦‚æžœæœ‰æœºä¼šï¼Œæˆ‘ä»¬ä¼šå’Œå¤§å®¶ä¸€èµ·æŽ¢ç´¢`åŠ¨æœº`éƒ¨åˆ†æåˆ°çš„é—®é¢˜äºŒã€‚

---

## å®‰è£…

1. ä½ éœ€è¦ä¸€å°æœ‰é™æ€å…¬ç½‘ IP çš„æœåŠ¡å™¨æˆ–è€…ä¸ªäººç”µè„‘ï¼ŒWindowsã€Linuxã€Mac éƒ½å¯ä»¥ 
2. ä¸‹è½½å¹¶å®‰è£… IPFSï¼Œè¿è¡Œ IPFS å¹¶è¿žæŽ¥å¼•å¯¼èŠ‚ç‚¹
   ```shell
   ipfs daemon --enable-pubsub-experiment
   ipfs swarm connect /ip4/47.111.58.76/tcp/4001/ipfs/QmZdWDS3qLbH55knn4hGjH2oq5hGwJz8sUHHz273xzX2rc
   ```
   ðŸ‹ 
   ```shell
   docker pull ipfs/go-ipfs
   docker run -d --rm --name ipfs_host -v /root/.ipfs:/data/ipfs -p 4001:4001 -p :8080:8080 -p :5001:5001 ipfs/go-ipfs daemon --migrate=true --enable-pubsub-experiment
   docker exec ipfs_host ipfs swarm connect /ip4/47.111.58.76/tcp/4001/ipfs/QmZdWDS3qLbH55knn4hGjH2oq5hGwJz8sUHHz273xzX2rc
   ```
   
3. æ·»åŠ å¼•å¯¼èŠ‚ç‚¹
   ```shell
   ipfs bootstrap add /ip4/47.111.58.76/tcp/4001/ipfs/QmZdWDS3qLbH55knn4hGjH2oq5hGwJz8sUHHz273xzX2rc
   ```   
   ðŸ‹ 
   ```shell
   docker exec ipfs_host ipfs bootstrap add /ip4/47.111.58.76/tcp/4001/ipfs/QmZdWDS3qLbH55knn4hGjH2oq5hGwJz8sUHHz273xzX2rc
   ```
4. å…è®¸æŽ¥å£è·¨åŸŸ
   * Windows: 
     ```shell
     ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin  [\"*\"]
     ```
   * Linux/Mac: 
     ```shell
     ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin  '["*"]'
     ```
        ðŸ‹ 
     ```shell
     docker exec ipfs_host ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin  '["*"]'
     ```
5. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://${ä½ çš„å…¬ç½‘ IP}:8080/ipfs/QmYkAMj25Qj7Yvv1rRwepstJWb1kASviT3hoAmmr9Dg6TM
6. é€šè¿‡å¯†é’¥å¯¹ç™»å½• ~/.ipfs/config ä¸­çš„ `PrivKey` é¡¹ 

---

## å¼€å‘ç›¸å…³

### Production

* update config.ts `development => product`
* pack & publish
  ```
  npm run build
  ipfs add -r dist
  ```
* update version in ipfs

### Dev

```
ipfs daemon --enable-pubsub-experiment
```
```
npm run start
```
```
npm run scss
```

### TODO

* hotkey
* upload file
* update avatar

### PubSub Topic

* starfire

### File Paths

* /starfire/index
* /starfire/users/id
* /starfire/posts/id
* /starfire/blacklist
* /starfire/version

### Theme

https://material.io/tools/color/#!/?view.left=0&view.right=1&primary.color=24282d&secondary.color=d93025


